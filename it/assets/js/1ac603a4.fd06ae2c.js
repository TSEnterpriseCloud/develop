"use strict";(self.webpackChunktse_dev_api=self.webpackChunktse_dev_api||[]).push([[20330],{67015:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"support/examples","title":"Esempi d\'uso","description":"Examples use","source":"@site/i18n/it/docusaurus-plugin-content-docs/version-1.0.1/support/examples.md","sourceDirName":"support","slug":"/support/examples-apis","permalink":"/develop/it/docs/support/examples-apis","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"general knowledge","permalink":"/develop/it/docs/tags/general-knowledge"},{"inline":true,"label":"beginner","permalink":"/develop/it/docs/tags/beginner"},{"inline":true,"label":"concepts","permalink":"/develop/it/docs/tags/concepts"},{"inline":true,"label":"rest","permalink":"/develop/it/docs/tags/rest"}],"version":"1.0.1","lastUpdatedAt":1737624780000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Esempi d\'uso","slug":"examples-apis","description":"Examples use","tags":["general knowledge","beginner","concepts","rest"]},"sidebar":"tutorialSidebar","previous":{"title":"Cronologia Rilasci *","permalink":"/develop/it/docs/support/change-log"},"next":{"title":"General Knowledge","permalink":"/develop/it/docs/support/general-knowledge/"}}');var t=n(74848),a=n(28453);const r={sidebar_position:6,title:"Esempi d'uso",slug:"examples-apis",description:"Examples use",tags:["general knowledge","beginner","concepts","rest"]},s="Documentazione a supporto degli scenari di utilizzo",l={},d=[{value:"Integration examples Postman",id:"integration-examples-postman",level:2},{value:"Integration Examples for Master Data",id:"integration-examples-for-master-data",level:2},{value:"Documenti",id:"documenti",level:2},{value:"Price Priority",id:"price-priority",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Example",id:"example",level:3},{value:"Gestione Kit",id:"gestione-kit",level:3},{value:"Documento di trasferimento tra depositi",id:"documento-di-trasferimento-tra-depositi",level:3},{value:"Document Service",id:"document-service",level:3},{value:"Trasformazione Documenti 1 a 1 e verifica Stato Evasione",id:"trasformazione-documenti-1-a-1-e-verifica-stato-evasione",level:2},{value:"Evadibilit\xe0 Portafoglio Ordini",id:"evadibilit\xe0-portafoglio-ordini",level:2},{value:"Trasformazione Documenti 1 a n",id:"trasformazione-documenti-1-a-n",level:2},{value:"Trasformazione Documenti n a n",id:"trasformazione-documenti-n-a-n",level:2},{value:"Acquisizione listini dall&#39;esterno: nuovo servizio IEImportLI",id:"acquisizione-listini-dallesterno-nuovo-servizio-ieimportli",level:2},{value:"Movimenti di Prima Nota",id:"movimenti-di-prima-nota",level:3},{value:"Gestioni non supportate",id:"gestioni-non-supportate",level:3}];function c(e){const i={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"documentazione-a-supporto-degli-scenari-di-utilizzo",children:"Documentazione a supporto degli scenari di utilizzo"})}),"\n",(0,t.jsx)(i.h2,{id:"integration-examples-postman",children:"Integration examples Postman"}),"\n",(0,t.jsx)(i.p,{children:"Within the various scenarios, JSON collections (Integration examples) containing usage examples of what is referred to in the Authentication Model section are made available. Specifically, it will be necessary to proceed with the execution of the authentication request in order to retrieve the JWT token (available in each example)."}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Auth Token"}),": requests the JWT token. Note that both the technical key assigned to the system and any verification."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Test Token"}),": performs an application call that uses the JWT token."]}),"\n"]}),"\n",(0,t.jsx)(i.admonition,{title:"Environment Usage",type:"info",children:(0,t.jsxs)(i.p,{children:["The collections require the use of variables defined in the ",(0,t.jsx)(i.code,{children:"ENV_TSE.postman_environment"})," environment, available at the following link."]})}),"\n",(0,t.jsx)(i.admonition,{title:"Note",type:"danger",children:(0,t.jsx)(i.p,{children:"Although the use of services allows for implementations different from those specified, please note that the supported functionalities are those described in the examples and in the API Reference."})}),"\n",(0,t.jsx)(i.h2,{id:"integration-examples-for-master-data",children:"Integration Examples for Master Data"}),"\n",(0,t.jsx)(i.p,{children:"The collection contains examples of GET/SEARCH/CREATE methods for the exposed resources."}),"\n",(0,t.jsx)(i.h2,{id:"documenti",children:"Documenti"}),"\n",(0,t.jsx)(i.p,{children:'La risorsa "Documento" pu\xf2 essere utilizzata per inserire / eliminare / modificare un documento in TSE.\nAnche se la stessa risorsa \xe8 utilizzabile per l\'inserimento di un qualsiasi tipo di documento.'}),"\n",(0,t.jsx)(i.p,{children:"L'inserimento di un documento pu\xf2 avvenire in modo sincrono con il metodo POST."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"N.B."})," Affinch\xe9 le informazioni passate alla WebAPI documenti con il relativo DTO siano effettivamente recepite e memorizzate \xe8 necessario che il wizard del codice documento utilizzato le gestisca sull'interfaccia utente.\nE' opportuno quindi in fase di progettazione della soluzione effettuare sempre un doppio check per assicurarsi che un documento inserito da interfaccia utente con le medesime informazioni che vengono passate via WebAPI sia correttamente inserito."]}),"\n",(0,t.jsx)(i.p,{children:"Si tenga presente che per inserire un documento non \xe8 necessario valorizzare tutte le propriet\xe0 del complesso DTO che lo rappresenta."}),"\n",(0,t.jsx)(i.p,{children:"L'inserimento minimale del documento avviene infatti indicando:"}),"\n",(0,t.jsx)(i.p,{children:'"ditta" (il codice della ditta di lavoro)\n"anagraficaDocumentoDitta": propriet\xe0 di tipo CompanyDocumentMasterDataMGDTO che rappresenta il codice del documento da utilizzare per l\'inserimento dell\'ordine.\nSu TSE ciascun documento fa riferimento ad un codice documento preventivamente attivato per l\'azienda di lavoro.\nPer poter inserire quindi un documento \xe8 obbligatorio indicare il codice del documento da utilizzare, codice a cui sono associati comportamenti e parametrizzazioni con le relative funzionalit\xe0 del gestionale (Personalizzazione documenti / Personalizzazione documenti azienda).\nQuindi ad esempio un possibile valore della propriet\xe0 anagraficaDocumentoDitta potrebbe essere:'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n        "dittaCg18": 100,\n        "codDocumMg36": "C-ORDINE",\n        "indStaperMg36": 1\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:'a richiedere l\'inserimento di un documento personalizzato (indStaperMg36 = 1, per i codici documento standard passare 0) con codice "C-ORDINE" attivato sulla ditta 100.'}),"\n",(0,t.jsx)(i.p,{children:'"customerSupplierMG": propriet\xe0 di tipo CustomerSupplierMGDTO che rappresenta il cliente o il fornitore a cui viene intestato il documento.\nQuindi ad esempio, lavorando sulla ditta 100, per intestare il documento al cliente con codice 123 \xe8 necessario valorizzare la propriet\xe0 customerSupplierMG in questo modo:'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n        "dittaCg18": 100,\n        "tipocfCg40": 0.0,\n        "clifor": 123\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"Si noti che clifor \xe8 il codice del cliente (o del fornitore per documenti di tipo fornitore) e non il suo ID sulla tabella CG44_CLIFOR.\nSi ricorda infine che l'indicatore tipocfCg40 deve essere valorizzato con i possibili valori del campo CG44_TIPOCF della tabella CG44_CLIFOR che sono:"}),"\n",(0,t.jsx)(i.p,{children:'0 per i clienti\n1 per i fornitori\n"sezdoc": il sezionale della numerazione del documento (es. "sezdoc": "00")\n"storageWH": propriet\xe0 di tipo StorageWHDTO che rappresenta il deposito da movimentare.\nQuindi ad esempio, lavorando sulla ditta 100, per ordinare la merce sul deposito "00", sar\xe0 necessario valorizzare la propriet\xe0 storageWH in questo modo:'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n        "dittaCg18": 100,\n        "codDep": "00"\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:'"righe": l\'array delle righe da inserire nel documento; \xe8 un array di oggetti di tipo DocumentoRigaMGDTO.\nLe righe attualmente gestite sono quelle di tipo articolo / articolo manuale, descrittiva e spesa varia.'}),"\n",(0,t.jsx)(i.p,{children:"Righe di tipo articolo: occorre almeno indicare ditta, progressivo riga, articolo, descrizione e quantit\xe0 (l'indtiporiga prende il valore zero di default), come nel seguente esempio:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n        "ditta": 100,\n        "progrRiga": 1.0,\n        "codartMg66": "ART001",\n        "descart": "Descrizione articolo ART001",\n        "qta1": 1.000\n}\n'})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.em,{children:"NOTA BENE"}),": Nel caso in cui si inseriscano righe documento di tipo articolo e un codice articolo preveda l'esplosione automatica di righe aggiuntive, il progrRiga \xe8 ricalcolato in automatico dalla procedura."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Tipologie di riga gestite"}),"\nE' possibile inserire nel corpo del documento le seguenti tipologie di righe:"]}),"\n",(0,t.jsx)(i.p,{children:"Articolo (indtiporiga = 0)\nArticolo manuale (indtiporiga = 1)\nDescrittiva (indtiporiga = 2)\nSpesa (indtiporiga = 4)\nTesto Fisso (indtiporiga = 6)\nNodo (indtiporiga = 15)\nAttivit\xe0 (indtiporiga = 16)\nSpesa di progetto (indtiporiga = 17)\nLe altre tipologie utilizzabili dall'interfaccia di emissione diretta documenti non sono supportate."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Propriet\xe0 callOptions"}),"\nLa propriet\xe0 callOptions consente di raggruppare tutte le opzioni/parametri di chiamata che non sono dei veri campi dell\u2019entit\xe0."]}),"\n",(0,t.jsx)(i.p,{children:"Attualmente sono disponibili le seguenti opzioni:\nflgSpbolliForceZero (default false): impostare a true se si vuole forzare il valore = 0 del flag spese bolli;\nflgSpincasForceZero (default false): impostare a true se si vuole forzare il valore = 0 del flag spese incassi;\nesclusioneAgentiMultipli (default false): impostare a true per escludere il caricamento degli agenti multipli in testata;\nesclusioneIvaTestata (default false): impostare a true per forzare Null il codice Iva di testata del documento;\nflgLockOnDocExist (default false): impostare a true per bloccare l'inserimento di un documento gi\xe0 esistente;\ndisableLetterOfIntent (default false): impostare a true per disattivare le lettere di intento;\nesclusioneSpeseTestiCliFor (default false): impostare a true per escludere la proposta delle righe spese e testi fissi di default del Cliente."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"ATTENZIONE:"}),' i parametri "esclusioneAgentiMultipli","esclusioneIvaTestata", "flgLockOnDocExist" gi\xe0 presenti nell\'entit\xe0 testata documento rimangono per garantire la compatibilit\xe0 con le versioni precedenti; si consiglia di non utilizzarli in quanto sono stati deprecati, nello swagger viene usato l\u2019attributo [Obsolete].']}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.img,{alt:"alt text",src:n(21579).A+"",width:"671",height:"273"})," ",(0,t.jsx)(i.em,{children:"immagine da allegare"})]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Recupero dei prezzi in inserimento delle righe"}),"\nSe i prezzi e gli sconti degli articoli di magazzino inseriti nel corpo del documento vengono passati con valore zero, allora la logica di business li valorizza in base alla configurazione del recupero prezzo impostata sulla parametrizzazione del codice documento utilizzato."]}),"\n",(0,t.jsx)(i.p,{children:"Per quanto riguarda gli scenari dei Documenti, vengono resi disponibili direttamente all'interno della chiamata POST (Create) del modulo IntegrationMG\\Documento dello swagger alcuni esempi:"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:"Inserire immagine swagger"})}),"\n",(0,t.jsx)(i.p,{children:"Tramite il Try it out sar\xe0 possibile eseguire automaticamente la chiamata, sostituendo i segnaposti indicati negli esempi con i relativi dati opportuni."}),"\n",(0,t.jsx)(i.p,{children:"Esempi disponibili:"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.em,{children:"Default (complete)"}),": riporta il body completo di chiamata;\n",(0,t.jsx)(i.em,{children:"Min required"}),": Informazioni minimali obbligatorie di testata;\n",(0,t.jsx)(i.em,{children:"Order"}),": esempio di body di un documento di tipo Ordine;\n",(0,t.jsx)(i.em,{children:"Delivery Note"}),": esempio di body di un documento di tipo bolla;\n",(0,t.jsx)(i.em,{children:"Invoice"}),": esempio di body di un documento di tipo fattura;\n",(0,t.jsx)(i.em,{children:"Transfer warehouses"}),": esempio di body di un documento trasferimento tra depositi."]}),"\n",(0,t.jsx)(i.h2,{id:"price-priority",children:"Price Priority"}),"\n",(0,t.jsx)(i.p,{children:"Price search from priority price lists through new PricePriorityLI service"}),"\n",(0,t.jsx)(i.p,{children:'The attached example shows the price of priority price lists processed based on the set priority table, used to generate the PricePriorityLI and displayed in the Result ("RowElaboratePriceList"), if the parameter "ResultElaboratePriceList" = true is set.'}),"\n",(0,t.jsx)(i.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Price Type (typeSalePurchaseProd)"}),": ",(0,t.jsx)(i.code,{children:"Decimal"})," (DO11_TIPOCF_CG44/2)",(0,t.jsx)(i.br,{}),"\n","0 = Sales (default)",(0,t.jsx)(i.br,{}),"\n","1 = Purchases",(0,t.jsx)(i.br,{}),"\n","2 = Production"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Article Code (CodartMg66)"}),": ",(0,t.jsx)(i.code,{children:"String"})," (DO30_CODART_MG66) \u2014 mandatory"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Customer/Supplier Code"}),": ",(0,t.jsx)(i.code,{children:"Decimal"})," (DO11_CLIFOR_CG44)"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Registration Date"}),": ",(0,t.jsx)(i.code,{children:"Datetime"})," (DateElab) \u2014 mandatory"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Quantity 1 (line) (qty1)"}),": ",(0,t.jsx)(i.code,{children:"Decimal"})," (DO30_QTA1)"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Price List Number (numPriceList)"}),": ",(0,t.jsx)(i.code,{children:"Decimal"})," (DO11_LISTMAG)"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Warehouse Code (codDepMg58)"}),": ",(0,t.jsx)(i.code,{children:"String"})," (DO30_CODDEP_MG58)"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Enable display of processed prices list (resultElaboratePriceList)"}),": if set = ",(0,t.jsx)(i.code,{children:"true"})]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n  "typeSalePurchaseProd": 0,\n  "codArtMg66": "ART_LI",\n  "cliforCg44": 1,\n  "dateElab": "2024-06-14 00:00:00",\n  "qty1": 0,\n  "numPriceList": 1,\n  "codDepMg58": "00",\n  "resultElaboratePriceList": true\n}\n'})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Recupero dei prezzi in inserimento delle righe da listini parametrici: servizio PriceParametricLI"}),"\nNuovo servizio PriceParametricLI (POST) per individuare il prezzo in base ai listini parametrici partendo dal codice priorit\xe0 impostato in tabella (\u201ctabella priorit\xe0\u201d)."]}),"\n",(0,t.jsx)(i.p,{children:'Questo nuovo servizio richiede i Parametri "PriceParametricParameters" e richiama la store Procedure SPLP_QUOTPROBELIST per ritornare il prezzo corrente con eventuali sconti  in "PriceParametricLI".'}),"\n",(0,t.jsx)(i.p,{children:"Viene previsto anche un parametro per richiedere il dettaglio dell\u2019esito dell\u2019elaborazione dei listini parametrici che permette di capire come si \xe8 formato il prezzo in base alla tabella priorit\xe0 e ai provider utilizzati."}),"\n",(0,t.jsx)(i.p,{children:"ATTENZIONE: Attualmente la store procedure gestisce anche le condizioni commerciali e le provvigioni per piede documento che in questa prima fase non sono gestite, (viene passato alla store procedure il parametro fisso  @RIGA_PIEDE=0)."}),"\n",(0,t.jsx)(i.h3,{id:"gestione-kit",children:"Gestione Kit"}),"\n",(0,t.jsx)(i.p,{children:"E' possibile ricercare, inserire, modificare e cancellare un kit e di conseguenza utilizzarlo all\u2019interno dei documenti opportunamente configurati (Parametri Generali documenti-Personalizzazione) con relativa esplosione dei componenti nelle righe documento."}),"\n",(0,t.jsx)(i.p,{children:"Utilizzando l'entit\xe0 Master KitWH e Detail KitLinkWH \xe8 possibile creare kit semplici, definendo solo articolo e quantit\xe0"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n    "codProductMg66": "BICI",\n    "dittaCg18": {{azienda}},\n    "exclusionChild1Mg82": null,\n    "exclusionChild2Mg82": null,\n    "exclusionChild3Mg82": null,\n    "exclusionChild4Mg82": null,\n    "exclusionFather1Mg82": "OR",\n    "exclusionFather2Mg82": "BO",\n    "exclusionFather3Mg82": "FA",\n    "exclusionFather4Mg82": "PR",\n    "optionProductMg5e": "",\n    "kitLinkWH": [\n        {\n            "codComponentMg66": "BICI2",\n            "optionComponentMg5e": "",\n            "qtyComponent1": 10.000000\n        },\n        {\n            "codComponentMg66": "MSE003",\n            "qtyComponent1": 15.000000\n        }\n    ]\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"o completi, dove \xe8 possibile valorizzare ulteriori propriet\xe0:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n    "codProductMg66": "MSE002",\n    "dittaCg18": {{azienda}},\n    "exclusionChild1Mg82": null,\n    "exclusionChild2Mg82": "BO",\n    "exclusionChild3Mg82": "PR",\n    "exclusionChild4Mg82": null,\n    "exclusionFather1Mg82": "OR",\n    "exclusionFather2Mg82": "BO",\n    "exclusionFather3Mg82": "FA",\n    "exclusionFather4Mg82": "PR",\n    "optionProductMg5e": "",\n    "kitLinkWH": [\n        {\n            "codComponentMg66": "BICI2",\n            "optionComponentMg5e": "",\n            "StartingDate": "2024-01-15T00:00:00",\n            "endingDate": "2024-12-31T00:00:00",\n            "qtyComponent1": 13.000000,\n            "qtyComponent2": 10.000000,\n            "fixedQta": 1,\n            "typeBomLink": 3,\n            "typeOptionalLink": 1,\n            "typeVal": 2,\n            "costComponent": 10.0000\n        },\n        {\n            "codComponentMg66": "BICI",\n            "optionComponentMg5e": "",\n            "StartingDate": "2024-01-15T00:00:00",\n            "edningDate": "2024-06-31T00:00:00",\n            "qtyComponent1": 25.000000,\n            "qtyComponent2": 33.000000,\n            "fixedQta": 1,\n            "typeBomLink": 3,\n            "typeOptionalLink": 0,\n            "typeVal": 3,\n            "costComponent": 150.0000\n        }\n    ]\n}\n'})}),"\n",(0,t.jsx)(i.h3,{id:"documento-di-trasferimento-tra-depositi",children:"Documento di trasferimento tra depositi"}),"\n",(0,t.jsx)(i.p,{children:"Si pu\xf2 emettere un DDT di scarico deposito, generando automaticamente  un nuovo DDT di carico a deposito."}),"\n",(0,t.jsx)(i.p,{children:"Nel json per la parte di Testata si devono compilare le propriet\xe0 storageWH per il deposito di partenza"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n\u202f \u202f "storageWH": { \n\u202f \u202f \u202f \u202f "dittaCg18": {{azienda}}, \n\u202f \u202f \u202f \u202f "codDep": "00" \n\u202f \u202f }\n'})}),"\n",(0,t.jsx)(i.p,{children:"e storageWHCollegato per il deposito di arrivo \u202f"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n"storageWHCollegato": { \n\u202f \u202f \u202f \u202f "codDep": "01", \n\u202f \u202f \u202f \u202f "descrdep": "Deposito secondario", \n\u202f \u202f \u202f \u202f "dittaCg18": {{azienda}}, \n\u202f \u202f }\n```,\nSe all\u2019interno di un documento l\u2019utente vuole definire un deposito di riga diverso da quello di testata, nel file json, nella sezione delle righe documento, si devono compilare coddepcolMg58 e coddepMg58 :\n\n```json showLineNumbers\n// body content\n{\n\u202f \u202f "coddepcolMg58": "01",\xa0\n\u202f \u202f \u202f"coddepMg58": "00",\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"dove il primo indica il deposito di destinazione ed il secondo il deposito di partenza."}),"\n",(0,t.jsx)(i.h3,{id:"document-service",children:"Document Service"}),"\n",(0,t.jsx)(i.p,{children:"DocumentService contiene un set di servizi di elaborazione a corredo della parte CRUD dei documenti, quali la trasformazione, l'evasione, il controllo evadibilit\xe0 portafoglio ordini e l'inserimento massivo dei documenti di tipo sincrono e asincrono."}),"\n",(0,t.jsx)(i.h2,{id:"trasformazione-documenti-1-a-1-e-verifica-stato-evasione",children:"Trasformazione Documenti 1 a 1 e verifica Stato Evasione"}),"\n",(0,t.jsx)(i.p,{children:"Nell'esempio allegato viene presentato lo scenario di interazione ERP-B2C che prevede l'inserimento di un Ordine cliente con:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Informazioni minimali obbligatorie di testata"}),"\n",(0,t.jsx)(i.li,{children:"Riga di tipo articolo, con codice articolo e quantit\xe0 (prezzo recuperato da listino nel BO)"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Per quanto concerne la Trasformazione Documenti (transform), con la seguente chiamata:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/DocumentService/transform?company={{defaultCompany}}&force=24368,89522\n}\n"})}),"\n",(0,t.jsx)(i.p,{children:"Viene eseguita la trasformazione documento in fattura, indicando il numero registrazione di origine del documento ordine ed il relativo modello di trasformazione, nella response ritorna il numero registrazione della fattura generata."}),"\n",(0,t.jsx)(i.p,{children:'Il servizio recupera i parametri da "DocumentTransformationParameterDTO" e restituisce in "DocumentTransformationMGDTO" la lista dei numeri di registrazione del documento generati.'}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:"DocumentTransformationParameterDTO"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n"[NumRegOrigin]"  - obbligatorio (Numero di registrazione che si vuole trasformare/evadere)\n"CodModelTransfDoc" - obbligatorio (Codice modello per la trasformazione documento)\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:"DocumentTransformationResponseDTO"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n"<NumRegDestination>" - (Elenco dei numero di registrazione creati)\n}\n'})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.em,{children:"Attenzione"}),": possono essere segnalati dei messaggi di warning forzabili con i seguenti parametri:"]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.em,{children:"&force=24368"}),": in presenza di segnalazione articoli bloccati;\n",(0,t.jsx)(i.em,{children:"&force=29074"}),": in presenza di segnalazione articoli e lotti trasformati sottoscorta."]}),"\n",(0,t.jsx)(i.p,{children:"Sono anche disponibili le seguenti Lookup per risalire ai modelli di trasformazione e alla loro composizione ed anche delle Lookup che interrogano oltre le entit\xe0 gi\xe0 presenti, ModelTrasformationCompanyMG, con dettaglio ModelTrasformationCompanyDetMG, le nuove entit\xe0 ModelTrasformationMG, con dettaglio ModelTrasformationDetMG, contenenti i codici documento di origine e di destinazione utilizzati dal modello di trasformazione utilizzato:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Lookup Modelli Trasformazione Generale: visualizza tutti i modelli (archivio generale) dettagliati con i documenti di origine e destinazione"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/ModelTrasformationMG\n\n- Lookup Dettaglio Modelli Trasformazione Generale: visualizza tutti i dettagli dei modelli (archivio generale)\n\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/ModelTrasformationDetMG\n\n- Lookup Modelli Trasformazione Generale: visualizza i modelli attivati per azienda (senza dettagli)\n\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/ModelTrasformationCompanyMG\n\n- Lookup Modelli Trasformazione con Dettaglio Documenti: visualizza i modelli attivati per azienda o archivio generale con i dettagli dei documenti di origine e destinazione effettivi (viene recuperata dall'Erp la propriet\xe0 ModelTrasformationCompanyMG.IndEvasmult, se a 99 vengono utilizzati i documenti dell\u2019archivio generale se a 1 vengono utilizzati invece i documenti dell'azienda).\n\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/ModelTrasformationCompanyDetMG\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/ModelTrasformationCompanyWithCodeDoc\n}\n"})}),"\n",(0,t.jsx)(i.p,{children:"Successivamente con la lookup Verifica Stato Evasione \xe8 possibile indicare il numero registrazione o il numero documento dell'ordine iniziale e nella response viene restituita la lista delle righe del documento indicato in input con il relativo stato evasione (q.t\xe0 documento, q.t\xe0 evase, q.t\xe0 residua) e riferimento alla/alle righe che hanno prelevato il documento."}),"\n",(0,t.jsxs)(i.p,{children:["Per quanto concerne la verifica Stato Evasione Documento (",(0,t.jsx)(i.em,{children:"docprocessingstatus"}),"), la seguente chiamata:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/DocumentService/docprocessingstatus?company={{defaultCompany}}&user=admin&loadEntireDomain=true&getTotalCount=true\n}\n"})}),"\n",(0,t.jsx)(i.p,{children:"elabora il risultato in funzione di una Search tipica, che, tramite una Action POST, nel cui body \xe8 possibile impostare tutte le propriet\xe0 esposte dal DTO di riferimento in maniera dinamica, restituisce una collection di entity contenente le righe del documento di riferimento con gli stati di avanzamento ed il proprio stato di evasione."}),"\n",(0,t.jsx)(i.p,{children:'Nel query param \xe8 possibile impostare anche il criterio di paginazione con totalizzazioni tramite la valorizzazione a True del parametro "getTotalCount".'}),"\n",(0,t.jsx)(i.p,{children:"E' inoltre disponibile un servizio di Lookup di interrogazione dello stato di evasione del singolo ordine come riportato di seguito:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/DocumentoStatoEvasoMG?metadata=true&company={{defaultCompany}}&_op=search\n}\n"})}),"\n",(0,t.jsx)(i.h2,{id:"evadibilit\xe0-portafoglio-ordini",children:"Evadibilit\xe0 Portafoglio Ordini"}),"\n",(0,t.jsxs)(i.p,{children:["Il servizio di Evadibilit\xe0 Portafoglio Ordini che appartiene allo ",(0,t.jsx)(i.em,{children:"scenario di spedizione esterna"})," consente di reperire l'elenco evadibilit\xe0 portafoglio ordini per la spedizione impostato nell'Erp ",(0,t.jsx)(i.em,{children:"indicando il Parametro utilizzato, in questo caso 1 e con tipo evadibilit\xe0 per singolo articolo, in modalit\xe0 sincrona. L'elenco degli ordini \xe8 visibile nella response."})]}),"\n",(0,t.jsx)(i.p,{children:"Per recuperare l'elenco degli ordini evadibili per la spedizione effettuare la seguente chiamata:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/DocumentService/orderavailability?company={{defaultCompany}}\n}\n"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n    "LimiteEvadibilita": 1,\n    "tipoEvadibilita": 0,\n    "codart":"",\n    "IsAsyncMode": "true",\n    "MinExpire": "180"\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"viene gestito un parametro (LimiteEvadibilita) che consente una pre-parametrizzazione dei filtri via Erp che verranno considerati in fase del payload nella Post della richiesta ed \xe8 inoltre possibile definire la tipologia di evadibilit\xe0 (tipoEvadibilita), il valore di default \xe8 0."}),"\n",(0,t.jsx)(i.p,{children:'I valori accettati dal nodo "tipoEvadibilita" in body sono:'}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"0 complessiva per tutti gli articoli (default);"}),"\n",(0,t.jsx)(i.li,{children:"1 per articolo selezionato ;"}),"\n",(0,t.jsx)(i.li,{children:"2 complessiva per tutti i documenti."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:'Se il parametro di asincronismo ("IsAsyncMode") della chiamata \xe8 impostato a false, l\u2019elaborazione avverr\xe0 in modalit\xe0 sequenziale con l\u2019obbligo di attesa della risposta col resultset risultante.'}),"\n",(0,t.jsx)(i.p,{children:'Il nodo "IsAsyncMode", se impostato a \u2018true\u2019, far\xe0 si che la gestione del recupero dei valori sia di tipo asincrono, modificando il solito comportamento delle richieste; in questo caso vengono considerati tutti gli articoli e nella response viene restituito un GuidSession che pu\xf2 essere inserito nel body di chiamata o interrogato dalla successiva Lookup.'}),"\n",(0,t.jsx)(i.p,{children:'Con il "guidSession" restituito sar\xe0 possibile recuperare il risultato tramite:'}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"apposita Lookup impostata sulla entity:"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/DocumPortfolioEvaMG?metadata=true&company={{defaultCompany}}&_op=search\n}\n"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:'riutilizzando lo stesso endpoint di chiamata, ampliando il body con il nodo della "guidSession" ottenuto:'}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "LimiteEvadibilita": 1,\n    "tipoEvadibilita": 0,\n    "codart":"",\n    "IsAsyncMode": "true",\n    "MinExpire": "180",\n    "guidSession": "{{guidSession}}"\n}\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:'Il parametro "MinExpire", consente di stabilire la durata della persistenza tra una chiamata e l\u2019altra del risultato, espresso in termini di minuti, e verr\xe0 utilizzato per simulare una cache della griglia dei dati depositata su una tabella. Ad ogni chiamata verr\xe0 ripulita la tabella delle righe dei result precedenti che avranno espirato i termini di tempo previsti (MGM2_PORTAFOGLIOORDINI).'}),"\n",(0,t.jsx)(i.p,{children:"Per entrambe le modalit\xe0, sincrona e asincrona \xe8 possibile reperire l'elenco evadibilit\xe0 portafoglio filtrando per singolo articolo e per la sua variante."}),"\n",(0,t.jsx)(i.p,{children:'Esempio con "tipoEvadiblit\xe0":1 ossia ricerca evadibilit\xe0 portafoglio ordini per articolo e con filtro per variante:'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "LimiteEvadibilita": 1,\n    "tipoEvadibilita": 1,\n    "codart":"{{Articolo1}}",\n    "variante":"{{Variante}}",\n    "IsAsyncMode": "false",\n    "MinExpire": "180"\n}\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"Nel body della chiamata \xe8 importante indicare correttamente il filtro \u201cvariante\u201d riportando esattamente lo schema di indicazione configurato nel gestionale TSE, ossia indicare le varianti con lo stesso numero di caratteri configurate nel gestionale."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"La delete consente di eliminare il set di elaborazioni per GuidSession."}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"La Lookup Borderaux consente la visualizzazione di una lista righe documenti con i dati della spedizione in stile borderaux"}),"."]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"E' disponibile anche una Lookup che consente la visualizzazione di una lista righe documenti con i dati della spedizione in stile Borderaux, eseguendo la seguente chiamata:"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/MG/Lookup/BorderauxMG?metadata=true&company={{defaultCompany}}&_op=search\n}\n"})}),"\n",(0,t.jsx)(i.h2,{id:"trasformazione-documenti-1-a-n",children:"Trasformazione Documenti 1 a n"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.em,{children:"Evasione DDT e Generazione fatture"}),"\nA fronte di un documento di partenza si possono generare automaticamente pi\xf9 documenti di destinazione (Trasformazione documenti 1 a n), tramite la configurazione della Rottura di riga sul modello di trasformazione documenti utilizzato. Gli elementi di rottura di riga sono quelli gestiti nell'Erp :"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Pagamento articolo"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Causale di magazzino"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Deposito"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Deposito collegato"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Sede"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Divisione"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Indicatore merce articolo 62"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"CIG/CUP"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Ad esempio simulando la chiamata di una trasformazione documenti per rottura di riga per deposito, la response restituisce n numRegDestination per ogni deposito di riga presente nel documento di origine, per cui in questo caso sul documento di origine (DDT) si modifica il coddepMg58 ossia un deposito di riga differente per ogni riga articolo, si definisce da Interfaccia la Rottura di riga per deposito sul modello di trasformazione che si desidera utilizzare. Quindi viene eseguita la trasformazione documento, indicando il numero registrazione di origine del documento DDT ed lo specifico modello di trasformazione 'per deposito'. Nella response ritornano n numero registrazioni di destinazione relativi alle fatture generate e quindi per ogni deposito di riga gestito sul documento di origine."}),"\n",(0,t.jsx)(i.h2,{id:"trasformazione-documenti-n-a-n",children:"Trasformazione Documenti n a n"}),"\n",(0,t.jsx)(i.p,{children:"Sono anche resi disponibili a titolo di esempio il body della chiamata in caso di :"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Evasione totale di un documento, con il riporto del numero documento di origine sul documento di destinazione"}),":"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Per procedere con il riporto corretto del documento di origine sul documento di destinazione da generare, \xe8 necessario compilare il parametro DocumentTransformationProcessExtremLimitDTO ed impostare AcceptDocMode = 1."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "numRegOrigin": ["202400000288"],\n    "codModelTransfDoc": "{{TrasformazioneORD-DDT}}",\n    "processExtremLimits": {\n        "acceptDocMode": 1,\n        "destinationDocParams": {\n            "dataReg": "2024-10-14",\n            "dataDoc": "2024-10-14",\n            "dataCompVatMan": "2024-10-14",\n            "sezdoc": "00",\n            "numDoc": 101.0,\n            "numDocOrig": 19.0\n        }\n    }\n}\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"In contemporanea alla trasformazione documenti, \xe8 anche possibile procedere con l'applicazione di uno o pi\xf9 filtri, definiti in SearchDTO."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Evasione parziale di una o pi\xf9 righe documento, specificando solo il progrRiga del documento di origine"}),":"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Se si desidera effettuare l'evasione parziale di una o pi\xf9 righe documento, \xe8 necessario specificare anche i parametri aggiuntivi in DocumentTransformationPartialEvadContainerGeneralDataDTO per ogni numRegOrigin della request."}),"\n",(0,t.jsx)(i.p,{children:"Nota Bene:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"numRegOrigin  - obbligatorio (Numero di registrazione che si desidera trasformare)"}),"\n",(0,t.jsx)(i.li,{children:"progrRiga - obbligatorio (Progressivo riga corrispondente alla riga documento che si desidera trasformare)"}),"\n",(0,t.jsx)(i.li,{children:"qtaTransf - obbligatorio (La quantit\xe0 da riportare sul documento di destinazione)"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "numRegOrigin": ["202400002619"],\n    "codModelTransfDoc": "1-FOR-ORDDDT",\n    "processExtremLimits": {\n        "acceptDocMode": 1,\n        "destinationDocParams": {\n            "dataReg": "2024-10-01T09:29:27.355Z",\n            "dataDoc": "2024-10-01T09:29:27.355Z",\n            "dataCompVatMan": "2024-10-01T09:29:27.355Z",\n            "sezdoc": "00",\n            "numDoc": 42,\n            "numDocOrig": 44\n        }\n    },\n    "documentTransformationPartialEvadContainerGeneralData": [\n        {\n            "numRegOrigin": "202400002619",\n            "documentTransformationGeneralData": [\n                {\n                    "progrRiga": 1,\n                    "qtaTransf": 2\n                },\n                {\n                    "progrRiga": 2,\n                    "qtaTransf": 4\n                }\n            ]\n        }\n    ]\n}  \n}\n'})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Evasione parziale di n documenti di origine, applicando anche un'eventuale variazione di prezzo e sconti a percentuale"}),":"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Nel caso in cui si desidera evadere l'ordine con un'eventuale variazione di prezzo o di sconto o di maggiorazione rispetto al documento di origine, si devono compilare gli opportuni parametri corrispondenti. Se si desidera mantenere le condizioni commerciali del documento di origine, i suddetti parametri non devono essere indicati nella request."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "numRegOrigin": [\n        "202400002730",\n        "202400002731"\n    ],\n    "codModelTransfDoc": "1-FOR-ORDDDT",\n    "processExtremLimits": {\n        "acceptDocMode": 1,\n        "destinationDocParams": {\n            "dataReg": "2024-10-14T09:29:27.355Z",\n            "dataDoc": "2024-10-14T09:29:27.355Z",\n            "dataCompVatMan": "2024-10-14T09:29:27.355Z",\n            "sezdoc": "00",\n            "numDoc": 104,\n            "numDocOrig": 96\n        }\n    },\n    "documentTransformationPartialEvadContainerGeneralData": [\n        {\n            "numRegOrigin": "202400002730",\n            "documentTransformationGeneralData": [\n                {\n                    "progrRiga": 1,\n                    "qtaTransf": 5,\n                    "price1": 300,\n                    "scper1": 2\n                },\n                {\n                    "progrRiga": 2,\n                    "qtaTransf": 3,\n                    "price1": 100,\n                    "scper1": 2.5\n                }\n            ]\n        },\n{\n            "numRegOrigin": "202400002731",\n            "documentTransformationGeneralData": [\n                {\n                    "progrRiga": 1,\n                    "qtaTransf": 2\n                },\n                {\n                    "progrRiga": 2,\n                    "qtaTransf": 4\n                }\n            ]\n        }\n    ]\n}\n}\n'})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Evasione totale di n documenti, applicando un filtro per codice articolo"}),":"]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "numRegOrigin": [\n        "202400002401",\n        "202400002402"\n    ],\n    "codModelTransfDoc": "1-FOR-ORDDDT",\n    "processExtremLimits": {\n        "acceptDocMode": 1,\n        "destinationDocParams": {\n            "dataReg": "2024-10-04",\n            "dataDoc": "2024-10-04",\n            "dataCompVatMan": "2024-10-04",\n            "sezdoc": "00",\n            "numDoc": 102.0,\n            "numDocOrig": 76.0\n        }\n    },\n    "rowSearchTransformationCriteria": {\n        "filters": {\n            "items": [\n                {\n                    "operator": 0,\n                    "comparer": 0,\n                    "propertyName": "CodartMg66",\n                    "value": "{{Articolo1}}"\n                }\n            ]\n        }\n    }\n}\n}\n'})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:'Evasione parziale di un documento, evadendo parzialmente la prima riga e dichiarando la seconda riga come "Non pi\xf9 evadibile" per il residuo'}),":"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:'Se in fase di evasione parziale di un documento, si desidera dichiarare una riga documento come Non pi\xf9 evadibile, si deve impostare il parametro rowNotEvad a "true" per il progrRiga corrispondente.'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n{\n    "numRegOrigin": [\n        "202400002889"\n    ],\n    "codModelTransfDoc": "1-FOR-ORDDDT",\n    "documentTransformationPartialEvadContainerGeneralData": [\n        {\n            "numRegOrigin": "202400002889",\n            "documentTransformationGeneralData": [\n                {\n                    "progrRiga": 1,\n                    "indtiporiga": 0,\n                    "qtaTransf": 3.0\n                },\n                {\n                    "indtiporiga": 0,\n                    "progrRiga": 2,\n                    "qtaTransf": 4.0,\n                    "rowNotEvad": true\n                }\n            ]\n        }\n    ]\n}\n}\n'})}),"\n",(0,t.jsx)(i.h2,{id:"acquisizione-listini-dallesterno-nuovo-servizio-ieimportli",children:"Acquisizione listini dall'esterno: nuovo servizio IEImportLI"}),"\n",(0,t.jsx)(i.p,{children:"Per eseguire l'importazione listino da file esterno, si deve effettuare la seguente chiamata:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"//{{webapi_base_url}}/api/v1/{{scope}}/LI/IEImportLI/pricelist?company={{defaultCompany}}\n"})}),"\n",(0,t.jsx)(i.p,{children:"Il servizio recupera i parametri da ImportParameterDTO e restituisce il numero delle righe importate correttamente ed il numero di righe non importate con relativa segnalazione di errore in ImportExportResultDTO."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:"ImportParameterDTO"})}),"\n",(0,t.jsx)(i.p,{children:"CodLayout - obbligatorio (Codice tracciato che si vuole utilizzare per eseguire l\u2019import)\nTypeSalePurchase - obbligatorio (Tipo di listino 0=Vendita 1=Acquisto)\nStreamFileImport \u2013 obbligatorio (File da importare in formato Base64)"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:"ImportExportResultDTO"})}),"\n",(0,t.jsx)(i.p,{children:"guidSessione - guid dell'elaborazione\nstateProcess - stato dell'elaborazione\nidStateProcess - id corrispondente allo stato dell'elaborazione\nheadProcess:\nguidResult - guid del risultato dell\u2019importazione\ntotRowImpExp-  numero totale delle righe da importare\nimpExpWithErrors\nrowElab - righe oggetto dell\u2019importazione\ntypeResult - id corrispondente al risultato dell'importazione\ntypeResultDescription - information\ndescription - descrizione delle note di importazione e di eventuali errori"}),"\n",(0,t.jsx)(i.p,{children:"Inoltre sono disponibili le chiamate su entit\xe0 di base, necessarie per effettuare l'importazione listini fornitore: LayoutCO con dettaglio IELayoutCODTO per recuperare il codice tracciato da utilizzare, StructureType con dettaglio IEStructureTypeCODTO e StructureSubType con dettaglio IEStructureSubTypeCODTO che corrispondono al Tipo struttura e Sottotipo struttura legati al tracciato in uso."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:"// body content\n{\n{{webapi_base_url}}/api/v1/{{scope}}/CO/IEStructureTypeCO/{{CodStructureType}}?company={{defaultCompany}}\n{{webapi_base_url}}/api/v1/{{scope}}/CO/IEStructureSubTypeCO/{{CodStructureSubType}}?company={{defaultCompany}}\n{{webapi_base_url}}/api/v1/{{scope}}/CO/IELayoutCO/{{CodLayout}}?company={{defaultCompany}}&CodStructureType={{CodStructureType}}\n}\n"})}),"\n",(0,t.jsx)(i.p,{children:"Il servizio accetta solo i tracciati che hanno CodStructureType = 18 (Listino articoli) e CodStructureSubType = 4 (Listino clienti/fornitori)."}),"\n",(0,t.jsx)(i.h3,{id:"movimenti-di-prima-nota",children:"Movimenti di Prima Nota"}),"\n",(0,t.jsx)(i.p,{children:"La risorsa \"GLEntryFI\" pu\xf2 essere utilizzata per inserire movimenti di prima nota in TSE.\nAnche se la stessa risorsa \xe8 utilizzabile per l'inserimento di qualsiasi tipo di movimento di prima nota, lo scenario applicativo attualmente supportato sul cloud \xe8 quello dell'inserimento di una Fattura di Vendita Cliente con Scadenze."}),"\n",(0,t.jsx)(i.p,{children:"Per quanto riguardo lo Swagger, fare riferimento al seguente servizio  FI / GLEntryFI / multiplecreatejob"}),"\n",(0,t.jsx)(i.p,{children:"gli scenari di Prima Nota, vengono resi disponibili direttamente nello swagger all'interno della chiamata POST (Create) e nella POST del multiplecreatejob del modulo IntegrationFI\\GLEntryFI, alcuni esempi:"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"alt text",src:n(13725).A+"",width:"1417",height:"876"})}),"\n",(0,t.jsx)(i.p,{children:"ramite il Try it out sar\xe0 possibile eseguire automaticamente la chiamata, sostituendo i segnaposti indicati negli esempi con i relativi dati opportuni."}),"\n",(0,t.jsx)(i.p,{children:"Esempi disponibili multiplecreatejob:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Default (complete): riporta il body completo di chiamata;"}),"\n",(0,t.jsx)(i.li,{children:"Supplier Invoice: fattura di acquisto fornitore"}),"\n",(0,t.jsx)(i.li,{children:"Supplier Invoice Payment: pagamento fattura di acquisto fornitore"}),"\n",(0,t.jsx)(i.li,{children:"Customer Invoice with due dates and deposit: fattura di vendita cliente con acconto e scadenze"}),"\n",(0,t.jsx)(i.li,{children:"Supplier Invoice reverse charge: fattura di acquisto in reverse charge;"}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Supplier Invoice/Payment"}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Movimento IVA fornitore (causale 31) senza scadenze;"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"1 contropartita con codice IVA (22%) su conto acquisto"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"alt text",src:n(32518).A+"",width:"1542",height:"343"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Pagamento fattura fornitore","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Causale pagata fattura (100) con numero documento riferimento fornitore;"}),"\n",(0,t.jsx)(i.li,{children:"1 riga Fornitore;"}),"\n",(0,t.jsx)(i.li,{children:"1 riga Contropartita Banca"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"alt text",src:n(97711).A+"",width:"1550",height:"320"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Customer Invoice with due dates and deposit"}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Movimento IVA cliente (causale 1) con 2 conti e 2 assoggettamenti IVA 22% con storno acconto","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"1 contropartita con codice IVA (22%) su conto ricavi"}),"\n",(0,t.jsx)(i.li,{children:"1 contropartita con codice IVA (22%) su conto anticipi cliente"}),"\n",(0,t.jsx)(i.li,{children:"3 scadenze (30/60/90)\nLa riga di acconto presente nella fattura \xe8 immessa come riga a valore con importo negativo."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"alt text",src:n(28688).A+"",width:"1548",height:"684"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Supplier Invoice reverse charge"}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Movimento IVA fornitore italiano (ex. causale 91) con codice iva di tipo reverse charge","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"1 contropartita con codice IVA di tipo reverse charge"}),"\n",(0,t.jsx)(i.li,{children:"1 scadenza di tipo rimessa diretta"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"alt text",src:n(34937).A+"",width:"1055",height:"700"})}),"\n",(0,t.jsx)(i.h1,{id:"nb-lesempio-allegato-utilizza-il-codice-causale-91-fattura-acquisto-art17-c5-dpr-63372-con-un-fornitore-italiano-il-medesimo-esempio-\xe8-valido-per-tute-le-causale-in-reverse-charge",children:"NB: l'esempio allegato utilizza il codice causale 91 Fattura acquisto art.17 c.5 DPR 633/72 con un fornitore italiano, il medesimo esempio \xe8 valido per tute le causale in reverse charge:"}),"\n",(0,t.jsx)(i.p,{children:"51 Fattura acquisto intracomunitaria (fornitore Cee)\n96 Fattura acq.sogg. non resid.(art.17 c.3) (fornitore Extracee)\n41 Fattura acquisto RSM (fornitore San Marino)\n93 Fattura acquisto art.17-ter DPR 633/72 (fornitore splitpayment)"}),"\n",(0,t.jsx)(i.p,{children:"con il seguente dettaglio di codice in chiamata:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n{\n\n    "data": {\n        "items": [\n            {\n                "vatReverseIncoporated": true,\n                "recoverReverseChargeIfNotDefined": true,\n                "externalRif": "60",\n                "ExternalInfo": {},\n                ....\n            }\n                ]\n            }\n}\n'})}),"\n",(0,t.jsx)(i.p,{children:"Riportiamo inoltre, il seguente dettaglio di codice relativo a:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Movimento IVA fornitore con ritenuta d'acconto"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",metastring:"showLineNumbers",children:'// body content\n\t\t\t"WtPurchases": [\n\t\t\t\t{\n\t\t\t\t\t"codTribrp": "",\n\t\t\t\t\t"codTributo": "1040",\n\t\t\t\t\t"contcditta": 0.0,\n\t\t\t\t\t"contcperc": 0.0,\n\t\t\t\t\t"contribint": 0.0,\n\t\t\t\t\t"datareg": "{{dataReg}}",\n\t\t\t\t\t"dittaCg18": {{defaultCompany}},\n\t\t\t\t\t"enasazienda": 0.0,\n\t\t\t\t\t"flgSegno": 0,\n\t\t\t\t\t"imponibilera": 100.00,\n\t\t\t\t\t"imponibilerp": 100.00,\n\t\t\t\t\t"importoalrit": 0.0,\n\t\t\t\t\t"importora": 20.00,\n\t\t\t\t\t"ind770": 1,\n\t\t\t\t\t"percra": 20.0,\n\t\t\t\t\t"percrp": 0.0,\n\t\t\t\t\t"provvnonsog": 0.0,\n\t\t\t\t\t"rimborsi": 0.00,\n\t\t\t\t\t"generalMasterDataCODTO": {\n\t\t\t\t\t\t"codice": {{idAnagProfessionista}}\n\t\t\t\t\t},\n\t\t\t\t\t"sectionalMasterDataCODTO": {\n\t\t\t\t\t\t"dittaCg18": {{defaultCompany}},\n\t\t\t\t\t\t"sezionale": "00"\n\t\t\t\t\t},\n\t\t\t\t\t"wtCodeCODTO": {\n\t\t\t\t\t\t"codice": "101 "\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n            \n'})}),"\n",(0,t.jsx)(i.p,{children:"Esempi disponibili in GLEntryFI:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Default (complete): riporta il body completo di chiamata;"}),"\n",(0,t.jsx)(i.li,{children:"Accounting transfer: giroconto contabile."}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Accounting transfer"}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Movimento NON IVA (causale 109)"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"1 riga Fornitore (debiti v/fornitori);"}),"\n",(0,t.jsx)(i.li,{children:"1 riga conto transitorio;"}),"\n",(0,t.jsx)(i.li,{children:"1 riga contropartita Clienti"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"alt text",src:n(52002).A+"",width:"1570",height:"357"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.h1,{id:"propriet\xe0-tipodoc---tipo-documento",children:"Propriet\xe0 tipoDoc - tipo documento"}),"\n",(0,t.jsx)(i.p,{children:"per garantire la congruenza nella protocollazione dei movimenti IVA si consiglia di passare tra i valori di testata la propriet\xe0 tipoDoc (tipo documento) valorizzandolo in modo coerente alla causale iva di riferimento"}),"\n",(0,t.jsx)(i.p,{children:"di seguito i valori da passare in funzione della causale di riferimento"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"ACQUISTI\nCausaleiva in (31, 41, 51, 71, 91, 93, 96) -> tipoDoc = 2\nCausaleiva = 32 -> tipoDoc = 1\nCausaleiva = 33 -> tipoDoc =14\nCausaleiva in (35, 42, 52, 92, 94, 97) ->tipoDoc = 5\nCausaleiva = 37 -> tipoDoc =7\nCausaleiva = 39 -> tipoDoc =9"}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"VENDITE\nCausaleiva in (1, 61, 281) -> tipoDoc =1\nCausaleiva = 2 -> tipoDoc = 13\nCausaleiva in (5, 63, 285) ->tipoDoc = 4\nCausaleiva = 7 ->tipoDoc = 6\nCausaleiva = 9 -> tipoDoc =8\nCausaleiva = 62 -> tipoDoc =10"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.h1,{id:"creazione-righe-iva",children:"Creazione righe IVA"}),"\n",(0,t.jsx)(i.p,{children:'Per ogni movimento di prima nota \xe8 possibile specificare tramite il parametro "autoVatRow" la possibilit\xe0 di calcolare o meno le righe in automatico (true) o passarle dall\'esterno (false). Di default il parametro \xe8 settato a false.'}),"\n",(0,t.jsx)(i.h1,{id:"creazione-scadenze",children:"Creazione scadenze"}),"\n",(0,t.jsx)(i.p,{children:"Al momento non vengono misurati tramite le condizioni di pagamento e quindi devono essere sempre passate. Attenzione: l'importo delle rate scadenze e della relativa iva, deve quadrare con il totale documento."}),"\n",(0,t.jsx)(i.h3,{id:"gestioni-non-supportate",children:"Gestioni non supportate"}),"\n",(0,t.jsx)(i.p,{children:"Qui di seguito un elenco di gestioni particolari attualmente non supportate in inserimento di un documento via WebAPI:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Controllo rischio"}),"\n",(0,t.jsx)(i.li,{children:"Esplosione schede multiple articoli"}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},13725:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-1-36448cda21db02132a9bf40a5e8f6e71.png"},32518:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-2-005f1dfd50adf7620234722f431fcbbb.png"},97711:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-3-04671e0838bef53f0f3cfe819e8a75d9.png"},28688:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-4-31294d3bd66cf71ee16e8c13bb8d53e8.png"},34937:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-5-a10cdfbc479a3114c452710412925fe0.png"},52002:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-6-919bdcf1d6d52f0ff5aea678c99f9b89.png"},21579:(e,i,n)=>{n.d(i,{A:()=>o});const o=n.p+"assets/images/image-3ca1f4609feeab2312d91b9b4bc21c59.png"},28453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>s});var o=n(96540);const t={},a=o.createContext(t);function r(e){const i=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(a.Provider,{value:i},e.children)}}}]);